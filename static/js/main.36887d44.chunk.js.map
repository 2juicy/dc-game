{"version":3,"sources":["features/player/player_walk.png","config/constants.js","features/map/index.js","features/player/reducer.js","features/map/reducer.js","config/store.js","features/player/index.js","features/player/movement.js","data/maps/1/index.js","features/world/index.js","App.js","index.js"],"names":["module","exports","__webpack_require__","p","SPRITE_SIZE","MAP_HEIGHT","MAP_WIDTH","getTileSprite","type","MapTile","props","react_default","a","createElement","className","concat","tile","style","height","width","MapRow","tiles","map","connect","state","position","top","left","border","row","initialState","spriteLocation","direction","walkIndex","playerReducer","arguments","length","undefined","action","Object","objectSpread","payload","mapReducer","rootReducer","combineReducers","player","store","createStore","window","__REDUX_DEVTOOLS_EXTENSION__","getSpriteLocation","dispatchMove","newPos","getState","getWalkIndex","dispatch","attemptMove","oldPos","getNewPosition","observeBoundaries","y","x","observeImpassable","addEventListener","e","preventDefault","keyCode","console","log","handleKeyDown","handleMovement","backgroundImage","walkSprite","backgroundPosition","World","margin","features_player","App","world","Component","ReactDOM","render","es","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.36887d44.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/player_walk.9f19440f.png\";","export const SPRITE_SIZE = 40;\r\nexport const MAP_HEIGHT = SPRITE_SIZE * 10;\r\nexport const MAP_WIDTH = SPRITE_SIZE * 20;\r\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { SPRITE_SIZE } from \"../../config/constants\";\nimport \"./style.css\";\n\nfunction getTileSprite(type) {\n  switch (type) {\n    case 0:\n      return \"grass\";\n    case 5:\n      return \"rock\";\n    case 6:\n      return \"tree\";\n    case 9:\n      return \"chest\";\n    default:\n  }\n}\n\nfunction MapTile(props) {\n  return (\n    <div\n      className={`tile ${getTileSprite(props.tile)}`}\n      style={{\n        height: SPRITE_SIZE,\n        width: SPRITE_SIZE\n      }}\n    />\n  );\n}\n\nfunction MapRow(props) {\n  return (\n    <div\n      className=\"row\"\n      style={{\n        height: SPRITE_SIZE\n      }}\n    >\n      {props.tiles.map(tile => (\n        <MapTile tile={tile} />\n      ))}\n    </div>\n  );\n}\n\nfunction Map(props) {\n  return (\n    <div\n      style={{\n        position: \"relative\",\n        top: \"0px\",\n        left: \"0px\",\n        width: \"800px\",\n        height: \"400px\",\n        border: \"2.5px solid gray\"\n      }}\n    >\n      {props.tiles.map(row => (\n        <MapRow tiles={row} />\n      ))}\n    </div>\n  );\n}\n\nfunction mapStateToProps(state) {\n  return {\n    tiles: state.map.tiles\n  };\n}\n\nexport default connect(mapStateToProps)(Map);\n","const initialState = {\r\n  position: [0, 0],\r\n  spriteLocation: \"0px 0px\",\r\n  direction: \"east\",\r\n  walkIndex: 0\r\n};\r\n\r\nconst playerReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case \"MOVE_PLAYER\":\r\n      return {\r\n        ...action.payload\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default playerReducer;\r\n","const initialState = {\r\n  tiles: []\r\n};\r\n\r\nconst mapReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case \"ADD_TILES\":\r\n      return {\r\n        ...action.payload\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default mapReducer;\r\n","import { createStore, combineReducers } from \"redux\";\r\nimport playerReducer from \"../features/player/reducer\";\r\nimport mapReducer from \"../features/map/reducer\";\r\n\r\nconst rootReducer = combineReducers({\r\n  player: playerReducer,\r\n  map: mapReducer\r\n});\r\n\r\nconst store = createStore(\r\n  rootReducer,\r\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\r\n);\r\n\r\nexport default store;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport walkSprite from \"./player_walk.png\";\r\nimport handleMovement from \"./movement\";\r\n\r\nfunction Player(props) {\r\n  return (\r\n    <div\r\n      style={{\r\n        position: \"absolute\",\r\n        top: props.position[1],\r\n        left: props.position[0],\r\n        backgroundImage: `url('${walkSprite}')`,\r\n        backgroundPosition: props.spriteLocation,\r\n        width: \"40px\",\r\n        height: \"40px\"\r\n      }}\r\n    />\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    ...state.player\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(handleMovement(Player));\r\n","import store from \"../../config/store\";\r\nimport { SPRITE_SIZE, MAP_HEIGHT, MAP_WIDTH } from \"../../config/constants\";\r\n\r\nexport default function handleMovement(player) {\r\n  function getNewPosition(oldPos, direction) {\r\n    switch (direction) {\r\n      case \"WEST\":\r\n        return [oldPos[0] - SPRITE_SIZE, oldPos[1]];\r\n      case \"EAST\":\r\n        return [oldPos[0] + SPRITE_SIZE, oldPos[1]];\r\n      case \"NORTH\":\r\n        return [oldPos[0], oldPos[1] - SPRITE_SIZE];\r\n      case \"SOUTH\":\r\n        return [oldPos[0], oldPos[1] + SPRITE_SIZE];\r\n      default:\r\n    }\r\n  }\r\n\r\n  function getSpriteLocation(direction, walkIndex) {\r\n    switch (direction) {\r\n      case \"SOUTH\":\r\n        return `${SPRITE_SIZE * walkIndex}px ${SPRITE_SIZE * 0}px`;\r\n      case \"EAST\":\r\n        return `${SPRITE_SIZE * walkIndex}px ${SPRITE_SIZE * 1}px`;\r\n      case \"WEST\":\r\n        return `${SPRITE_SIZE * walkIndex}px ${SPRITE_SIZE * 2}px`;\r\n      case \"NORTH\":\r\n        return `${SPRITE_SIZE * walkIndex}px ${SPRITE_SIZE * 3}px`;\r\n      default:\r\n    }\r\n  }\r\n\r\n  function getWalkIndex() {\r\n    const walkIndex = store.getState().player.walkIndex;\r\n    return walkIndex >= 7 ? 0 : walkIndex + 1;\r\n  }\r\n\r\n  function observeBoundaries(oldPos, newPos) {\r\n    return (\r\n      newPos[0] >= 0 &&\r\n      newPos[0] <= MAP_WIDTH - SPRITE_SIZE &&\r\n      (newPos[1] >= 0 && newPos[1] <= MAP_HEIGHT - SPRITE_SIZE)\r\n    );\r\n  }\r\n\r\n  function observeImpassable(oldPos, newPos) {\r\n    const tiles = store.getState().map.tiles;\r\n    const y = newPos[1] / SPRITE_SIZE;\r\n    const x = newPos[0] / SPRITE_SIZE;\r\n    const nextTile = tiles[y][x];\r\n    return nextTile < 5;\r\n  }\r\n\r\n  function dispatchMove(direction, newPos) {\r\n    const walkIndex = getWalkIndex();\r\n    store.dispatch({\r\n      type: \"MOVE_PLAYER\",\r\n      payload: {\r\n        position: newPos,\r\n        direction,\r\n        walkIndex,\r\n        spriteLocation: getSpriteLocation(direction, walkIndex)\r\n      }\r\n    });\r\n  }\r\n\r\n  function attemptMove(direction) {\r\n    const oldPos = store.getState().player.position;\r\n    const newPos = getNewPosition(oldPos, direction);\r\n\r\n    if (observeBoundaries(oldPos, newPos) && observeImpassable(oldPos, newPos))\r\n      dispatchMove(direction, newPos);\r\n  }\r\n\r\n  function handleKeyDown(e) {\r\n    e.preventDefault();\r\n\r\n    switch (e.keyCode) {\r\n      case 37:\r\n        return attemptMove(\"WEST\");\r\n      case 38:\r\n        return attemptMove(\"NORTH\");\r\n      case 39:\r\n        return attemptMove(\"EAST\");\r\n      case 40:\r\n        return attemptMove(\"SOUTH\");\r\n      default:\r\n        console.log(e.keyCode);\r\n    }\r\n  }\r\n\r\n  window.addEventListener(\"keydown\", e => {\r\n    handleKeyDown(e);\r\n  });\r\n\r\n  return player;\r\n}\r\n","// prettier-ignore\r\nexport const tiles = [\r\n    [0,0,0,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6],\r\n    [6,0,0,5,5,5,5,6,6,0,0,0,0,0,6,6,6,5,5,6],\r\n    [6,6,0,0,6,5,6,6,0,0,0,0,0,0,6,6,0,9,5,6],\r\n    [6,6,0,0,6,6,6,0,0,0,0,0,0,0,6,6,0,0,5,6],\r\n    [6,6,0,0,0,6,6,0,0,0,0,0,0,0,6,6,6,6,6,6],\r\n    [6,5,5,6,0,0,6,0,0,0,0,0,0,0,6,6,6,6,6,6],\r\n    [6,6,5,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],\r\n    [6,6,6,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5],\r\n    [6,6,6,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,5],\r\n    [6,6,6,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,5]\r\n]\r\n","import React from \"react\";\r\nimport Map from \"../map\";\r\nimport Player from \"../player\";\r\nimport { tiles } from \"../../data/maps/1\";\r\nimport store from \"../../config/store\";\r\n\r\nfunction World(props) {\r\n  store.dispatch({ type: \"ADD_TILES\", payload: { tiles } });\r\n  return (\r\n    <div\r\n      style={{\r\n        position: \"relative\",\r\n        width: \"800px\",\r\n        height: \"400px\",\r\n        margin: \"20px auto\"\r\n      }}\r\n    >\r\n      <Map />\r\n      <Player />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default World;\r\n","import React, { Component } from \"react\";\nimport World from \"./features/world\";\n\nclass App extends Component {\n  render() {\n    return (\n      <div>\n        <World />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { Provider } from \"react-redux\";\n\nimport store from \"./config/store\";\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}