(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,n){e.exports=n.p+"static/media/player_walk.9f19440f.png"},22:function(e,t,n){e.exports=n(35)},27:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(18),o=n.n(c),i=(n(27),n(7)),l=n(8),s=n(11),u=n(10),p=n(12),m=n(1),d=40,f=10*d,E=20*d;n(32);function h(e){switch(e){case 0:return"grass";case 3:return"tree";case 4:return"chest";case 5:return"rock";case 6:return"tree"}}function v(e){return r.a.createElement("div",{className:"tile ".concat(h(e.tile)),style:{height:d,width:d}})}function b(e){return r.a.createElement("div",{className:"row",style:{height:d}},e.tiles.map(function(e){return r.a.createElement(v,{tile:e})}))}var y=Object(m.b)(function(e){return{tiles:e.map.tiles}})(function(e){return r.a.createElement("div",{style:{position:"relative",top:"0px",left:"0px",width:"800px",height:"480px",border:"2.5px solid gray"}},e.tiles.map(function(e){return r.a.createElement(b,{tiles:e})}))}),O=n(2),g=n(20),w=n.n(g);var j=Object(m.b)(function(e){return Object(O.a)({},e.player)})(function(e){return r.a.createElement("div",{style:{position:"absolute",top:e.position[1],left:e.position[0],backgroundImage:"url('".concat(w.a,"')"),backgroundPosition:e.spriteLocation,width:"".concat(d,"px"),height:"".concat(d,"px")}})}),T=n(6),x=n(21);n(33);function S(e){var t=e.enemy,n=e.HP,a=e.enemyHP,c=e.potion;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"player"},r.a.createElement("h4",null,"You"),r.a.createElement("img",{src:"enemies/player.png",alt:"Enemy"}),r.a.createElement("h4",null,"HP: ",n," | Lvl: 1")),r.a.createElement("div",{className:"menu"},r.a.createElement("div",{className:"menu-item"},r.a.createElement("img",{src:"buttons/ctrl.png",alt:"Heal"}),r.a.createElement("div",null,r.a.createElement("h4",null,"to heal"))),r.a.createElement("div",{className:"menu-item"},r.a.createElement("img",{src:"buttons/spacebar.png",alt:"Attack"}),r.a.createElement("div",null,r.a.createElement("h4",null,"to attack"))),r.a.createElement("h4",{className:"combat-text"},"You have ",c," potions!"),r.a.createElement("h4",{className:"combat-text"},"A wild ",t.name," appears!")),r.a.createElement("div",{className:"enemy"},r.a.createElement("h4",{style:{textTransform:"capitalize"}},t.name),r.a.createElement("img",{src:"enemies/".concat(t.image),alt:"Enemy"}),r.a.createElement("h4",null,"HP: ",a," | Lvl: ",t.hp/t.const)))}var k=n(5),_={position:[0,0],spriteLocation:"0px 40px",direction:"EAST",walkIndex:0},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MOVE_PLAYER":return Object(O.a)({},e,t.payload);case"UPDATE_WALK_INDEX":return Object(O.a)({},e,{walkIndex:t.payload});default:return e}},N={tiles:[]},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TILES":return Object(O.a)({},t.payload);default:return e}},M={visible:!1},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;switch((arguments.length>1?arguments[1]:void 0).type){case"START_COMBAT":return{visible:!0};case"END_COMBAT":return{visible:!1};default:return e}},H=Object(k.b)({player:A,map:D,modal:L}),I=Object(k.c)(H,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());function R(e,t){return Array.apply(0,Array(t+1-e)).map(function(t,n){return n+e})}function C(e){return e[Math.floor(Math.random()*e.length)]}var P={tiles:[[0,0,0,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6],[6,0,0,5,5,5,5,6,6,6,6,6,6,6,6,6,6,5,5,6],[6,6,0,0,6,5,6,6,0,0,6,6,0,0,6,6,0,4,5,6],[6,6,0,0,6,6,6,6,6,0,0,0,0,5,6,6,0,0,5,6],[6,6,0,0,0,6,6,6,6,0,0,6,5,5,6,6,6,3,6,6],[6,5,5,5,0,0,6,0,6,0,0,6,5,6,6,6,6,3,6,6],[6,6,5,5,0,0,0,0,0,0,0,6,6,6,0,0,0,0,6,6],[6,6,6,6,6,0,0,6,6,6,0,0,6,0,0,6,6,0,6,5],[6,6,6,0,0,0,0,6,6,0,0,0,0,0,0,5,6,6,5,5],[6,6,6,6,0,0,6,6,6,0,0,6,0,0,5,5,6,6,5,5],[6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,5,5],[6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,5,5,5]],enemies:[{name:"slime",image:"slime.png",const:6,atk:1},{name:"spider",image:"spider.png",const:10,atk:2},{name:"wolf",image:"wolf.png",const:15,atk:4}],levelRange:[1,4]};n(34);function U(e,t){var n=C(e);return Object(O.a)({},n,{hp:parseInt(n.const*C(R.apply(void 0,Object(x.a)(t))))})}var B=Object(m.b)(function(e){return Object(O.a)({},e.modal)})(function(e){var t=Object(a.useState)(100),n=Object(T.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(3),l=Object(T.a)(i,2),s=l[0],u=l[1],p=Object(a.useState)(U(P.enemies,P.levelRange)),m=Object(T.a)(p,2),d=m[0],f=m[1],E=Object(a.useState)(d.hp),h=Object(T.a)(E,2),v=h[0],b=h[1];Object(a.useEffect)(function(){return console.log("mount"),window.addEventListener("keydown",y),function(){console.log("unmount"),f(U(P.enemies,P.levelRange)),window.removeEventListener("keydown",y)}},[]);var y=function(t){if(e.visible)switch(t.preventDefault(),t.keyCode){case 17:return void(s&&c<100&&(u(--s),o(c=100)));case 32:return b(v-=Math.floor(6*Math.random()+5)),o(c-=Math.floor(6*Math.random()+5)),void((c<1||v<1)&&I.dispatch({type:"END_COMBAT"}));default:console.log(t.keyCode)}};return r.a.createElement("div",{className:"modal"},r.a.createElement("h1",null,"COMBAT"),r.a.createElement(S,{enemy:d,HP:c,enemyHP:v,potion:s}))});function X(e,t){var n=function(e){return e[0]>=0&&e[0]<=E-d&&e[1]>=0&&e[1]<=f-d}(t);return n&&(n=function(e){var t=I.getState().map.tiles,n=e[1]/d,a=e[0]/d;return t[n][a]<5}(t)),n&&I.dispatch({type:"UPDATE_WALK_INDEX",payload:J()}),10===Math.floor(10*Math.random()+1)&&I.dispatch({type:"START_COMBAT"}),n?t:e}function W(e,t){switch(t){case"WEST":return X(e,[e[0]-d,e[1]]);case"EAST":return X(e,[e[0]+d,e[1]]);case"NORTH":return X(e,[e[0],e[1]-d]);case"SOUTH":return X(e,[e[0],e[1]+d]);default:return[e[0],e[1]]}}function V(e){var t=I.getState().player.walkIndex;switch(e){case"SOUTH":return"".concat(d*t,"px ").concat(0*d,"px");case"EAST":return"".concat(d*t,"px ").concat(1*d,"px");case"WEST":return"".concat(d*t,"px ").concat(2*d,"px");case"NORTH":return"".concat(d*t,"px ").concat(3*d,"px")}}function Y(e){var t=I.getState();I.dispatch({type:"MOVE_PLAYER",payload:{position:W(t.player.position,e),direction:e,spriteLocation:V(e)}})}function J(){var e=I.getState().player.walkIndex;return e>=7?0:e+1}var K=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.persistMapData(P)}},{key:"render",value:function(){return r.a.createElement("div",{className:"map",style:{position:"relative",width:E,height:f,margin:"20px auto"}},r.a.createElement(y,this.props.map),r.a.createElement(j,null),this.props.modal.visible&&r.a.createElement(B,null))}}]),t}(r.a.Component);var z,q=Object(m.b)(function(e){return{modal:e.modal,map:e.map}},function(e){return{persistMapData:function(t){e({type:"ADD_TILES",payload:t})}}})((z=K,window.addEventListener("keydown",function(e){I.getState().modal.visible||function(e){switch(e.preventDefault(),e.keyCode){case 37:return Y("WEST");case 38:return Y("NORTH");case 39:return Y("EAST");case 40:return Y("SOUTH");default:console.log(e.keyCode)}}(e)}),z)),F=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(q,null)}}]),t}(a.Component);o.a.render(r.a.createElement(m.a,{store:I},r.a.createElement(F,null)),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.c674311c.chunk.js.map