(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,a){e.exports=a.p+"static/media/player_walk.9f19440f.png"},22:function(e,t,a){e.exports=a(35)},27:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),o=a.n(c),i=(a(27),a(7)),l=a(8),s=a(11),u=a(10),p=a(12),m=a(1),d=40,f=10*d,h=20*d;a(32);function E(e){switch(e){case 0:return"grass";case 3:return"tree";case 4:return"chest";case 5:return"rock";case 6:return"tree"}}function v(e){return r.a.createElement("div",{className:"tile ".concat(E(e.tile)),style:{height:d,width:d}})}function y(e){return r.a.createElement("div",{className:"row",style:{height:d}},e.tiles.map(function(e){return r.a.createElement(v,{tile:e})}))}var b=Object(m.b)(function(e){return{tiles:e.map.tiles}})(function(e){return r.a.createElement("div",{style:{position:"relative",top:"0px",left:"0px",width:"800px",height:"480px",border:"2.5px solid gray"}},e.tiles.map(function(e){return r.a.createElement(y,{tiles:e})}))}),O=a(2),g=a(20),w=a.n(g);var j=Object(m.b)(function(e){return Object(O.a)({},e.player)})(function(e){return r.a.createElement("div",{style:{position:"absolute",top:e.position[1],left:e.position[0],backgroundImage:"url('".concat(w.a,"')"),backgroundPosition:e.spriteLocation,width:"".concat(d,"px"),height:"".concat(d,"px")}})}),T=a(6),k=a(21);a(33);function x(e){var t=e.enemy,a=e.HP,n=e.enemyHP,c=e.message;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"player"},r.a.createElement("h4",null,"You"),r.a.createElement("img",{src:"enemies/player.png",alt:"Enemy"}),r.a.createElement("h4",null,"HP: ",a[0])),r.a.createElement("div",{className:"menu"},r.a.createElement("div",{className:"menu-item"},r.a.createElement("img",{src:"buttons/ctrl.png",alt:"Heal"}),r.a.createElement("div",null,r.a.createElement("h4",null,"to heal"))),r.a.createElement("div",{className:"menu-item"},r.a.createElement("img",{src:"buttons/spacebar.png",alt:"Attack"}),r.a.createElement("div",null,r.a.createElement("h4",null,"to attack"))),r.a.createElement("h4",{className:"combat-text"},"You have ",a[1]," potion(s) left!"),r.a.createElement("h4",{className:"combat-text"},c)),r.a.createElement("div",{className:"enemy"},r.a.createElement("h4",{style:{textTransform:"capitalize"}},t.name),r.a.createElement("img",{src:"enemies/".concat(t.image),alt:"Enemy"}),r.a.createElement("h4",null,"HP: ",n," | Lvl: ",t.hp/t.const)))}var S=a(5),_={position:[0,0],spriteLocation:"0px 40px",direction:"EAST",walkIndex:0},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MOVE_PLAYER":return Object(O.a)({},e,t.payload);case"UPDATE_WALK_INDEX":return Object(O.a)({},e,{walkIndex:t.payload});default:return e}},N={tiles:[]},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TILES":return Object(O.a)({},t.payload);default:return e}},M={visible:!1},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;switch((arguments.length>1?arguments[1]:void 0).type){case"START_COMBAT":return{visible:!0};case"END_COMBAT":return{visible:!1};default:return e}},H=Object(S.b)({player:A,map:D,modal:L}),I=Object(S.c)(H,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());function P(e,t){return Array.apply(0,Array(t+1-e)).map(function(t,a){return a+e})}function R(e){return e[Math.floor(Math.random()*e.length)]}var C={tiles:[[0,0,0,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6],[6,0,0,5,5,5,5,6,6,6,6,6,6,6,6,6,6,5,5,6],[6,6,0,0,6,5,6,6,0,0,6,6,0,0,6,6,0,4,5,6],[6,6,0,0,6,6,6,6,6,0,0,0,0,5,6,6,0,0,5,6],[6,6,0,0,0,6,6,6,6,0,0,6,5,5,6,6,6,3,6,6],[6,5,5,5,0,0,6,0,6,0,0,6,5,6,6,6,6,3,6,6],[6,6,5,5,0,0,0,0,0,0,0,6,6,6,0,0,0,0,6,6],[6,6,6,6,6,0,0,6,6,6,0,0,6,0,0,6,6,0,6,5],[6,6,6,0,0,0,0,6,6,0,0,0,0,0,0,5,6,6,5,5],[6,6,6,6,0,0,6,6,6,0,0,6,0,0,5,5,6,6,5,5],[6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,5,5],[6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,5,5,5]],enemies:[{name:"slime",image:"slime.png",const:6,atk:1},{name:"spider",image:"spider.png",const:10,atk:2},{name:"wolf",image:"wolf.png",const:15,atk:4}],levelRange:[1,4]};a(34);function Y(e,t){var a=R(e);return Object(O.a)({},a,{hp:parseInt(a.const*R(P.apply(void 0,Object(k.a)(t))))})}var U=Object(m.b)(function(e){return Object(O.a)({},e.modal)})(function(e){var t=Object(n.useState)(Y(C.enemies,C.levelRange)),a=Object(T.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)("A wild ".concat(c.name," appears!")),l=Object(T.a)(i,2),s=l[0],u=l[1],p=Object(n.useState)([50,3]),m=Object(T.a)(p,2),d=m[0],f=m[1],h=Object(n.useState)(c.hp),E=Object(T.a)(h,2),v=E[0],y=E[1];Object(n.useEffect)(function(){return window.addEventListener("keydown",b),function(){o(Y(C.enemies,C.levelRange)),window.removeEventListener("keydown",b)}},[]);var b=function(t){if(e.visible)switch(t.preventDefault(),t.keyCode){case 17:return void(d[1]&&d[0]<50?(f([d[0]=50,--d[1]]),u("You used a potion!")):50===d[0]?u("You already have full health!"):d[1]||u("You have no more potions!"));case 32:return function(){var e=[Math.floor(6*Math.random()+5),Math.floor(6*Math.random()+5)];e[0]>d[0]?f([d[0]=0,d[1]]):f([d[0]=d[0]-e[0],d[1]]),y(e[1]>v?v=0:v-=e[1]),d[0]<1||v<1?(u("You have defeated your opponent!"),setTimeout(function(){I.dispatch({type:"END_COMBAT"})},2e3)):u("You took ".concat(e[0]," damage and dealt ").concat(e[1]," to your opponent!"))}();default:console.log(t.keyCode)}};return r.a.createElement("div",{className:"modal"},r.a.createElement("h1",null,"COMBAT"),r.a.createElement(x,{enemy:c,HP:d,enemyHP:v,message:s}))});function B(e,t){var a=function(e){return e[0]>=0&&e[0]<=h-d&&e[1]>=0&&e[1]<=f-d}(t);return a&&(a=function(e){var t=I.getState().map.tiles,a=e[1]/d,n=e[0]/d;return t[a][n]<5}(t)),a&&I.dispatch({type:"UPDATE_WALK_INDEX",payload:J()}),10===Math.floor(10*Math.random()+1)&&I.dispatch({type:"START_COMBAT"}),a?t:e}function X(e,t){switch(t){case"WEST":return B(e,[e[0]-d,e[1]]);case"EAST":return B(e,[e[0]+d,e[1]]);case"NORTH":return B(e,[e[0],e[1]-d]);case"SOUTH":return B(e,[e[0],e[1]+d]);default:return[e[0],e[1]]}}function W(e){var t=I.getState().player.walkIndex;switch(e){case"SOUTH":return"".concat(d*t,"px ").concat(0*d,"px");case"EAST":return"".concat(d*t,"px ").concat(1*d,"px");case"WEST":return"".concat(d*t,"px ").concat(2*d,"px");case"NORTH":return"".concat(d*t,"px ").concat(3*d,"px")}}function V(e){var t=I.getState();I.dispatch({type:"MOVE_PLAYER",payload:{position:X(t.player.position,e),direction:e,spriteLocation:W(e)}})}function J(){var e=I.getState().player.walkIndex;return e>=7?0:e+1}var K=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.persistMapData(C)}},{key:"render",value:function(){return r.a.createElement("div",{className:"map",style:{position:"relative",width:h,height:f,margin:"20px auto"}},r.a.createElement(b,this.props.map),r.a.createElement(j,null),!this.props.modal.visible&&r.a.createElement("p",null,"Press the arrow keys to move!"),this.props.modal.visible&&r.a.createElement(U,null))}}]),t}(r.a.Component);var z,q=Object(m.b)(function(e){return{modal:e.modal,map:e.map}},function(e){return{persistMapData:function(t){e({type:"ADD_TILES",payload:t})}}})((z=K,window.addEventListener("keydown",function(e){I.getState().modal.visible||function(e){switch(e.preventDefault(),e.keyCode){case 37:return V("WEST");case 38:return V("NORTH");case 39:return V("EAST");case 40:return V("SOUTH");default:console.log(e.keyCode)}}(e)}),z)),F=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(q,null)}}]),t}(n.Component);o.a.render(r.a.createElement(m.a,{store:I},r.a.createElement(F,null)),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.ec7b12cc.chunk.js.map